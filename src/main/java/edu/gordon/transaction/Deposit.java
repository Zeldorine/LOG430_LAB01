/* * ATM Example system - file Deposit.java    * * copyright (c) 2001 - Russell C. Bjork * */package edu.gordon.transaction;import edu.gordon.banking.AccountInformation;import edu.gordon.banking.Balances;import edu.gordon.banking.Card;import edu.gordon.banking.Message;import edu.gordon.banking.Money;import edu.gordon.banking.Receipt;import edu.gordon.exception.Cancelled;import static edu.gordon.transaction.Transaction.nextSerialNumber;/** * Representation for a deposit transaction */public class Deposit extends Transaction {    /**     * Constructor     *     * @param edu.gordon.atm the ATM used to communicate with customer     * @param session the session in which the transaction is being performed     * @param card the customer's card     * @param pin the PIN entered by the customer     */    public Deposit(int atmId, String bankName, String atmPlace,            Card card, int pin) {        this.card = card;        this.pin = pin;        this.serialNumber = nextSerialNumber++;        this.balances = new Balances();        this.atmId = atmId;        this.bankName = bankName;        this.atmPlace = atmPlace;        state = GETTING_SPECIFICS_STATE;    }    /**     * Get specifics for the transaction from the customer     *     * @return message to bank for initiating this transaction     * @exception CustomerConsole.Cancelled if customer cancelled this     * transaction     */    public Message getSpecificsFromCustomer(int from, int to, Money amount) throws Cancelled {        this.amount = amount;        this.to = to;        return new Message(Message.INITIATE_DEPOSIT,                card, pin, serialNumber, -1, to, amount);    }    /**     * Complete an approved transaction     *     * @return receipt to be printed for this transaction     * @exception CustomerConsole.Cancelled if customer cancelled or transaction     * timed out     */    public Receipt completeTransaction() throws Cancelled {        return new Receipt(atmId, bankName, atmPlace, this.card, serialNumber, this.balances) {            {                detailsPortion = new String[2];                detailsPortion[0] = "DEPOSIT TO: "                        + AccountInformation.ACCOUNT_ABBREVIATIONS[to];                detailsPortion[1] = "AMOUNT: " + amount.toString();            }        };    }    @Override    public boolean needFromAccount() {        return false;    }    @Override    public boolean needToAccount() {        return true;    }    @Override    public boolean needAmount() {        return true;    }    /**     * Account to deposit to     */    private int to;    /**     * Amount of money to deposit     */    private Money amount;    @Override    public boolean needDispanceAmount() {        return false;    }    @Override    public boolean needAcceptEnvelope() {        return true;    }    @Override    public Message getEnvelopeAcceptMessage() {        return new Message(Message.COMPLETE_DEPOSIT,                card, pin, serialNumber, -1, to, amount);    }}